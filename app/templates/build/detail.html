{% extends "_base.html" %}

{% block content %}

    <div class="container">
        <div class="page-header">
            <h3> 构建详情</h3>
        </div>
        <div class="container">
            <div class="col-md-1">
                <label>项目名称:</label>
            </div>
            <div class="col-md-11">
                <strong> {{ data.name }}</strong>
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>镜像:</label>
            </div>
            <div class="col-md-11">
                {{ '192.168.0.210/'~data.image_name~':'~data.tag }}
                <span class="btn btn-primary btn-xs"
                      data-clipboard-text="{{ '192.168.0.210/'~data.image_name~':'~data.tag }}">
                    复制
                </span>
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>构建状态:</label>
            </div>
            <div class="col-md-11">
                {{ 'success' }}
            </div>
        </div>


        <div class="container">
            <div class="col-md-1">
                <label>端口号:</label>
            </div>
            <div class="col-md-11">
                {{ data.port }}
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>内网地址:</label>
            </div>
            <div class="col-md-11">
                <a href="{{ 'http://'~data.host }}" target="_blank">{{ data.host }}</a>
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>仓库地址:</label>
            </div>
            <div class="col-md-11">
                <a href="{{ data.code_registry }}" target="_blank">{{ data.code_registry }}</a>
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>git分支:</label>
            </div>
            <div class="col-md-11">
                <span class="label {{ 'label-warning' if data.branch == 'develop' else 'label-primary' }}">{{ data.branch }}</span>
                - {{ data.message }}
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>通知方式:</label>
            </div>
            <div class="col-md-11">
                {{ data.notify }}
            </div>
        </div>


        <div class="container">
            <div class="col-md-1">
                <label>构建时间:</label>
            </div>
            <div class="col-md-11">
                {{ data.created_at|utc2local }}
            </div>
        </div>

        <div class="container">
            <div class="col-md-1">
                <label>run命令:</label>
            </div>
            <div class="col-md-11">
                <pre><code>{{ data.command |safe }}</code></pre>
            </div>
        </div>


        <div class="container">
            <div class="col-md-1">
                <label>Dockerfile:</label>
            </div>
            <div class="col-md-11">
                <pre><code>{{ data.dockerfile }}</code></pre>
            </div>
        </div>
    </div>


{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
        hljs.initHighlightingOnLoad();
        var clipboard = new ClipboardJS('.btn');
    </script>
{% endblock %}